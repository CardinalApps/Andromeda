<a name="module_Bridge"></a>

## Bridge

* [Bridge](#module_Bridge)
    * [.Bridge](#module_Bridge.Bridge)
        * [.init(type, [options])](#module_Bridge.Bridge+init)
        * [.ipcSay(channel, message)](#module_Bridge.Bridge+ipcSay)
        * [.ipcAsk(channel, message)](#module_Bridge.Bridge+ipcAsk) ⇒ <code>Promise</code>
        * [.ipcListen(channel, cb)](#module_Bridge.Bridge+ipcListen)
        * [.httpApi(route, verb, body)](#module_Bridge.Bridge+httpApi) ⇒ <code>object</code>
        * [.httpApiUrl()](#module_Bridge.Bridge+httpApiUrl)
        * [.wsSay(channel, message)](#module_Bridge.Bridge+wsSay) ⇒ <code>boolean</code>
        * [.wsListen(channel, cb)](#module_Bridge.Bridge+wsListen)
        * [.removeListener(channel, cb, ws)](#module_Bridge.Bridge+removeListener) ⇒ <code>boolean</code>
        * [.removeIpcListener()](#module_Bridge.Bridge+removeIpcListener)
        * [.removeWsListener()](#module_Bridge.Bridge+removeWsListener)
        * [.__showListeners(channel)](#module_Bridge.Bridge+__showListeners)
        * [.cleanup()](#module_Bridge.Bridge+cleanup)

<a name="module_Bridge.Bridge"></a>

### Bridge.Bridge
The Bridge allows for the client to communicate with the Hydra server, if it
exists on the LAN. The Bridge supports the server HTTP API, and the server
WebSocket API.

When running in Electron, the Bridge can also be used to communicate with the
Electron main process via IPC, regardless of whether there is a server
available.

After creating a Bridge instance, call `init()` for each connection type you
wish to establish.

**Kind**: static class of [<code>Bridge</code>](#module_Bridge)  

* [.Bridge](#module_Bridge.Bridge)
    * [.init(type, [options])](#module_Bridge.Bridge+init)
    * [.ipcSay(channel, message)](#module_Bridge.Bridge+ipcSay)
    * [.ipcAsk(channel, message)](#module_Bridge.Bridge+ipcAsk) ⇒ <code>Promise</code>
    * [.ipcListen(channel, cb)](#module_Bridge.Bridge+ipcListen)
    * [.httpApi(route, verb, body)](#module_Bridge.Bridge+httpApi) ⇒ <code>object</code>
    * [.httpApiUrl()](#module_Bridge.Bridge+httpApiUrl)
    * [.wsSay(channel, message)](#module_Bridge.Bridge+wsSay) ⇒ <code>boolean</code>
    * [.wsListen(channel, cb)](#module_Bridge.Bridge+wsListen)
    * [.removeListener(channel, cb, ws)](#module_Bridge.Bridge+removeListener) ⇒ <code>boolean</code>
    * [.removeIpcListener()](#module_Bridge.Bridge+removeIpcListener)
    * [.removeWsListener()](#module_Bridge.Bridge+removeWsListener)
    * [.__showListeners(channel)](#module_Bridge.Bridge+__showListeners)
    * [.cleanup()](#module_Bridge.Bridge+cleanup)

<a name="module_Bridge.Bridge+init"></a>

#### bridge.init(type, [options])
Invoked by the theme, this will retrieve information needed for this Bridge
instance. Must be invoked before the Bridge can be used normally.

**Kind**: instance method of [<code>Bridge</code>](#module_Bridge.Bridge)  

| Param | Type | Description |
| --- | --- | --- |
| type | <code>string</code> | Connection type. `http` for the HTTP API, `ws` for the WebSocket API, or `ipc` for Electron IPC. |
| [options] | <code>object</code> | Required for `http` and `ws` connections, this must be an object with the properties `scheme`, `host`, and `port`. |

<a name="module_Bridge.Bridge+ipcSay"></a>

#### bridge.ipcSay(channel, message)
Sends an IPC message on a channel. Does not expect a response.

**Kind**: instance method of [<code>Bridge</code>](#module_Bridge.Bridge)  

| Param | Type | Description |
| --- | --- | --- |
| channel | <code>string</code> | IPC channel name. |
| message | <code>\*</code> | Message to send. Strings, array, object, boolean, number. |

<a name="module_Bridge.Bridge+ipcAsk"></a>

#### bridge.ipcAsk(channel, message) ⇒ <code>Promise</code>
Same as `.say()`, except that it expects a response.

**Kind**: instance method of [<code>Bridge</code>](#module_Bridge.Bridge)  
**Returns**: <code>Promise</code> - A promise that resolves with the reply from the main process.  

| Param | Type | Description |
| --- | --- | --- |
| channel | <code>string</code> | IPC channel name. |
| message | <code>\*</code> | Message to send. Strings, array, object, boolean, number. |

<a name="module_Bridge.Bridge+ipcListen"></a>

#### bridge.ipcListen(channel, cb)
Registers a listener on an IPC channel.

**Kind**: instance method of [<code>Bridge</code>](#module_Bridge.Bridge)  

| Param | Type | Description |
| --- | --- | --- |
| channel | <code>string</code> | IPC channel name. |
| cb | <code>function</code> | Callback function invoked whenever something is said on the channel. |

<a name="module_Bridge.Bridge+httpApi"></a>

#### bridge.httpApi(route, verb, body) ⇒ <code>object</code>
Sends a HTTP request to the local Hydra server.

**Kind**: instance method of [<code>Bridge</code>](#module_Bridge.Bridge)  
**Returns**: <code>object</code> - Returns a response object, which contains the parsed
server response and a status code.  

| Param | Type | Default | Description |
| --- | --- | --- | --- |
| route | <code>string</code> |  | The route for this endpoint in the Hydra Server API. Must start with a leading slash. |
| verb | <code>string</code> | <code>&quot;GET&quot;</code> | HTTP request method. |
| body | <code>\*</code> | <code></code> | Request body. Will be automatically stringified if necessary. |

<a name="module_Bridge.Bridge+httpApiUrl"></a>

#### bridge.httpApiUrl()
Returns the HTTP API url for the connected Cardinal Server.

**Kind**: instance method of [<code>Bridge</code>](#module_Bridge.Bridge)  
<a name="module_Bridge.Bridge+wsSay"></a>

#### bridge.wsSay(channel, message) ⇒ <code>boolean</code>
Sends a message to the server via WebSockets. The WebSocket connect must
have already been established with init().

**Kind**: instance method of [<code>Bridge</code>](#module_Bridge.Bridge)  
**Returns**: <code>boolean</code> - Returns true if no errors were thrown. Returns false if
the connection had not been established.  

| Param | Type | Description |
| --- | --- | --- |
| channel | <code>string</code> | Anything that can be send by WebSocket.send(). |
| message | <code>mixed</code> | Anything that that be stringified. |

<a name="module_Bridge.Bridge+wsListen"></a>

#### bridge.wsListen(channel, cb)
Subscribe to messages on a certain WebSocket channel. This type of listener j

**Kind**: instance method of [<code>Bridge</code>](#module_Bridge.Bridge)  

| Param | Type | Description |
| --- | --- | --- |
| channel | <code>string</code> | WebSocket channel name. |
| cb | <code>function</code> | Callback function invoked whenever something is said on the channel. |

<a name="module_Bridge.Bridge+removeListener"></a>

#### bridge.removeListener(channel, cb, ws) ⇒ <code>boolean</code>
Removes an IPC or WS listener.

**Kind**: instance method of [<code>Bridge</code>](#module_Bridge.Bridge)  

| Param | Type | Default | Description |
| --- | --- | --- | --- |
| channel | <code>string</code> |  | Channel name. |
| cb | <code>function</code> |  | Reference to the callback function. |
| ws | <code>function</code> | <code>false</code> | Remove a WebSocket listener instead of an IPC one. |

<a name="module_Bridge.Bridge+removeIpcListener"></a>

#### bridge.removeIpcListener()
Removes an IPC listener.

**Kind**: instance method of [<code>Bridge</code>](#module_Bridge.Bridge)  
<a name="module_Bridge.Bridge+removeWsListener"></a>

#### bridge.removeWsListener()
Removes an WebSocket listener.

**Kind**: instance method of [<code>Bridge</code>](#module_Bridge.Bridge)  
<a name="module_Bridge.Bridge+__showListeners"></a>

#### bridge.\_\_showListeners(channel)
console.log's the raw ipc listeners for a channel. For use in the renderer dev tools.

**Kind**: instance method of [<code>Bridge</code>](#module_Bridge.Bridge)  

| Param | Type | Description |
| --- | --- | --- |
| channel | <code>string</code> | IPC channel name. |

<a name="module_Bridge.Bridge+cleanup"></a>

#### bridge.cleanup()
Removes all IPC and WS listeners. Does not close the WS connection.

**Kind**: instance method of [<code>Bridge</code>](#module_Bridge.Bridge)  
