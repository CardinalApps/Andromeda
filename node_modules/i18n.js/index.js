/**
 * Returns a string from the translations.
 * 
 * The strings are pulled from a key:value global object saved as `window.i18n`.
 * This object should be created before calling this function.
 * 
 * @param {string} key - The string key.
 * @param {string} [lang] - Language slug to use (eg. `en`, `fr`). Defaults to the
 * language in the Router if there is one, otherwise `en`.
 */
export default function i18n(key, lang = 'en') {
  // if no lang is given, but one is set in the Router, use it
  if (!lang && 'Router' in window && 'currentLang' in window.Router) {
    lang = Router.currentLang
  }

  if (!('i18n' in window)) {
    console.error('Missing key-value i18n store')
    return key
  }

  if (!window.i18n.hasOwnProperty(lang)) {
    console.error(`Language ${lang} does not exist in i18n.`)
    return key
  }

  if (!window.i18n[lang].hasOwnProperty(key)) {
    return key
  }

  return window.i18n[lang][key]
}